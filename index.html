<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html" charset="utf-8"/>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/>
<!--<meta property="og:url" content="http://lakeheadbedbug.hopto.org" />-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"/>

<link rel="stylesheet" href="css/style.css"/>
<link rel="manifest" href="manifest.json"/>
<title>A Super Bug Zapper 3D Game</title>
<script src="common/webgl-debug.js" charset="utf-8"></script>
<script src="common/webgl-utils.js" charset="utf-8"></script>
<script src="tdl/base.js"></script>
</head>
<body>
<div class="body">
<div id="fpsContainer">
  <div class="fpsInner">
    <div id="fullscreen"></div>
    <div class="fps">fps: <span id="fps"></span></div>
    </div>
    <div><br> <br></div><div id="lightb">
    <button id="lightb">Toggle<i class="fas fa-lightbulb"></i></button>
  </div>
</div>

<div id="b"><a href="http://lakeheadbedbug.hopto.org"><i class="fa fa-bug"></i>Bug Zapp3D-'<i>with a vengnece!!'</i></a> <i class="fa fa-bug"></i> lakeheadbedbug.hopto.org <i class="fa fa-bug"></i></div>
<div id="gameData">
  <div class="gameInner">
    <div id="fullscreen"></div>
    <div class="game">Game Stat:  Current Value <span id="game"></span></div>
    <div> <br> ---------------------------<br> </div>
    <div class="gamescore"><i class="fas fa-gamepad"></i> Score:  <b><span id="gamescore"></span></b></div>
    <div> <br> <br> </div>
    <div class="bugsdead"><i class="fa fa-bug"></i> Bugs Killed:  <b><span id="bugsdead"></span></b></div>
    <div> <br> <br> </div>
    <div class="bugsgroup">Active Bug Groups:  <b><span id="bugsgroup"></span></b></div>
    <div> <br> <br> </div>
    <div class="bugstotal">Total Active Bugs:  <b><span id="bugstotal"></span></b></div>
    <div> <br><br> </div>
    <div class="bugspawn"><i class="fa fa-bug"></i> Bugs Spawned:  <b><span id="bugspawn"></span></b></div>
    <div> <br><br> </div>
    <div class="stime"><i class="fa fa-clock"></i> Time:  <b><span id="stime"></span></b></div>
    <div> <br><br> </div>
    <button id="flipvert"><i class="fas fa-arrow-alt-circle-up fa-3x"></i></button>
    <div> <br><br> </div>
    <button id="fliphord"><i class="fas fa-arrow-alt-circle-left fa-3x"></i></button>
    <button id="fliphor"><i class="fas fa-arrow-alt-circle-right fa-3x"></i></button>
    <div> <br><br> </div>
    <button id="flipvertd"><i class="fas fa-arrow-alt-circle-down fa-3x"></i></button>
  </div>
</div>
<div id="viewContainer">
  <canvas id="c" width="600" height="600">
    Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>
  </div>
</div>
<!--WEBGL shaders
    // an attribute will receive data from a buffer
    // fragment shaders don't have a default precision so we need
    to pick one. mediump is a good default
    // look up where the vertex data needs to go.
    var positionAttributeLocation = gl.getAttribLocation(program, "a_position");
    var brightnessAttributeLocation = gl.getAttribLocation(program, "a_brightness");
    -->
<script id="vs" type="notjs">
  uniform mat4 u_worldViewProjection;
  uniform vec3 u_lightWorldPos;
  uniform mat4 u_world;
  uniform mat4 u_viewInverse;
  uniform mat4 u_worldInverseTranspose;

  attribute vec4 a_position;
  attribute vec3 a_normal;
  attribute vec2 a_texcoord;

  varying vec4 v_position;
  varying vec2 v_texCoord;
  varying vec3 v_normal;
  varying vec3 v_surfaceToLight;
  varying vec3 v_surfaceToView;

  void main() {
    v_texCoord = a_texcoord;
    v_position = (u_worldViewProjection * a_position);
    v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;
    v_surfaceToLight = u_lightWorldPos - (u_world * a_position).xyz;
    v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;
    gl_Position = v_position;
  }
</script>

<script id="fs" type="notjs">
  precision mediump float;

  varying vec4 v_position;
  varying vec2 v_texCoord;
  varying vec3 v_normal;
  varying vec3 v_surfaceToLight;
  varying vec3 v_surfaceToView;

  uniform vec4 u_lightColor;
  uniform vec4 u_diffuseMult;
  uniform sampler2D u_diffuse;
  uniform vec4 u_specular;
  uniform float u_shininess;
  uniform float u_specularFactor;

  vec4 lit(float l ,float h, float m) {
    return vec4(1.0, abs(l), (l > 0.0) ? pow(max(0.0, h), m) : 0.0, 1.0);
  }
  /*varying vec4 v_color;
  uniform vec4 u_colorMult;
  uniform vec4 u_colorOffset; 
  */
  void main() {
    vec4 diffuseColor = texture2D(u_diffuse, v_texCoord) * u_diffuseMult;
    vec3 a_normal = normalize(v_normal);
    vec3 surfaceToLight = normalize(v_surfaceToLight);
    vec3 surfaceToView = normalize(v_surfaceToView);
    vec3 halfVector = normalize(surfaceToLight + surfaceToView);
    vec4 litR = lit(dot(a_normal, surfaceToLight),
                      dot(a_normal, halfVector), u_shininess);
    vec4 outColor = vec4((u_lightColor * (diffuseColor * litR.y +
          u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
    gl_FragColor = outColor;
  }
</script>
<!---<script src="twgl/twgl-full.js"></script>-->
<script src="3rdparty/chroma.min.js"></script>
<script src="tdl/fps.js"></script>
<script src="tdl/fast.js"></script>
<script src="node_modules/twgl.js/dist/4.x/twgl-full.js"></script>
    <!--
    @license twgl.js Copyright (c) 2015, Gregg Tavares All Rights Reserved.
    Available via the MIT license.
    see: http://github.com/greggman/twgl.js for details    -->
<script src="index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>

</body>

</html>