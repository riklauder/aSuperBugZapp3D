<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html" charset="utf-8"/>
    <!--

    @license twgl.js Copyright (c) 2015, Gregg Tavares All Rights Reserved.
    Available via the MIT license.
    see: http://github.com/greggman/twgl.js for details

    -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/>
<meta property="og:description" content="TWGL.js - 2d-lines" />
<meta property="og:url" content="http://twgljs.org" />
<link rel="stylesheet" href="css/style.css"/>
<link rel="manifest" href="manifest.json"/>
<title>A Super Bug Zapper 3D Game</title>
<script src="common/webgl-debug.js" charset="utf-8"></script>
<script src="common/webgl-utils.js" charset="utf-8"></script>

</head>
<body>
<div class="body">
<div id="fpsContainer">
  <div class="fpsInner">
    <div id="fullscreen"></div>
    <div class="fps">fps: <span id="fps"></span></div>
  </div>
</div>
<div id="b"><a href="http://lakeheadbedbug.hopto.org">Bug Zapp3D-'<i>with a vengnece!!'</i></a> - lakeheadbedbug</div>
<div id="viewContainer">
<canvas id="c" width="800" height="800">
Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
</div>
</div>
<!--WEBGL shaders
    // an attribute will receive data from a buffer
    // fragment shaders don't have a default precision so we need
    to pick one. mediump is a good default
    // look up where the vertex data needs to go.
    var positionAttributeLocation = gl.getAttribLocation(program, "a_position");
    var brightnessAttributeLocation = gl.getAttribLocation(program, "a_brightness");
    -->
<script id="vs" type="notjs">
  uniform mat4 u_worldViewProjection;
  uniform vec3 u_lightWorldPos;
  uniform mat4 u_world;
  uniform mat4 u_viewInverse;
  uniform mat4 u_worldInverseTranspose;

  attribute vec4 a_position;
  attribute vec3 a_normal;
  attribute vec2 a_texcoord;

  varying vec4 v_position;
  varying vec2 v_texCoord;
  varying vec3 v_normal;
  varying vec3 v_surfaceToLight;
  varying vec3 v_surfaceToView;

  void main() {
    v_texCoord = a_texcoord;
    v_position = (u_worldViewProjection * a_position);
    v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;
    v_surfaceToLight = u_lightWorldPos - (u_world * a_position).xyz;
    v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;
    gl_Position = v_position;
  }
</script>

<script id="fs" type="notjs">
  precision mediump float;

  varying vec4 v_position;
  varying vec2 v_texCoord;
  varying vec3 v_normal;
  varying vec3 v_surfaceToLight;
  varying vec3 v_surfaceToView;

  uniform vec4 u_lightColor;
  uniform vec4 u_diffuseMult;
  uniform sampler2D u_diffuse;
  uniform vec4 u_specular;
  uniform float u_shininess;
  uniform float u_specularFactor;

  vec4 lit(float l ,float h, float m) {
    return vec4(1.0,
                abs(l),//max(l, 0.0),
                (l > 0.0) ? pow(max(0.0, h), m) : 0.0,
                1.0);
  }
  /*varying vec4 v_color;
  uniform vec4 u_colorMult;
  uniform vec4 u_colorOffset; 
  */
  void main() {
    vec4 diffuseColor = texture2D(u_diffuse, v_texCoord) * u_diffuseMult;
    vec3 a_normal = normalize(v_normal);
    vec3 surfaceToLight = normalize(v_surfaceToLight);
    vec3 surfaceToView = normalize(v_surfaceToView);
    vec3 halfVector = normalize(surfaceToLight + surfaceToView);
    vec4 litR = lit(dot(a_normal, surfaceToLight),
                      dot(a_normal, halfVector), u_shininess);
    vec4 outColor = vec4((u_lightColor * (diffuseColor * litR.y +
          u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
    gl_FragColor = outColor;
  }
</script>
<script src="3rdparty/chroma.min.js" charset="utf-8"></script>
<script src="node_modules/twgl.js/dist/4.x/twgl-full.js" charset="utf-8"></script>
<script src="tdl/base.js" charset="utf-8"></script>
<script src="tdl/fps.js" charset="utf-8"></script>
<script src="tdl/fast.js" charset="utf-8"></script>
<script src="index.js" charset="utf-8"></script>
</body>
  
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>

</html>